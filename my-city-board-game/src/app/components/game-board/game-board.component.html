<div class="main-container">
  <div class="placement-status">
    <h3>{{ getCurrentPlacementText() }}</h3>
  </div>
  <div class="board-wrapper">
    <!-- Empty corner cell -->
    <div class="label-corner"></div>

    <!-- Column labels (top) -->
    @for (colLabel of colLabels; track $index) {
      <div class="label-col">{{ colLabel }}</div>
    }

    <!-- Row labels and cells -->
    @for (row of board(); track $rowIndex; let $rowIndex = $index) {
      <!-- Row label (left) -->
      <div class="label-row" [class.scoring-street]="isRowScoringStreet($rowIndex)">{{ rowLabels[$rowIndex] }}</div>

      <!-- Cells for this row -->
      @for (cell of row; track $colIndex; let $colIndex = $index) {
        <div
          class="cell"
          [class.disabled]="!currentRolls() || currentRolls()?.length !== 2"
          [class.clickable]="isCellClickable($rowIndex, $colIndex)"
          [class.not-allowed]="
            currentRolls() &&
            currentRolls()?.length === 2 &&
            !isCellClickable($rowIndex, $colIndex) &&
            !isCellOccupied($rowIndex, $colIndex)
          "
          [class.occupied]="isCellOccupied($rowIndex, $colIndex)"
          [class.scoring-street]="isRowScoringStreet($rowIndex)"
          [class.scoring-group]="isCellInScoringGroup($rowIndex, $colIndex)"
          (click)="handleCellClick($rowIndex, $colIndex)"
        >
          @if (getCellPoints($rowIndex, $colIndex) > 0) {
            <div class="cell-points">{{ getCellPoints($rowIndex, $colIndex) }}</div>
          }
          @if (cell) {
            <lucide-icon [name]="cell" />
          }
        </div>
      }
    }
  </div>
  
  <!-- Footer scoring grid -->
  <div class="footer-wrapper">
    @for (score of footerScores(); track $index) {
      <div class="footer-cell" 
           [class.has-score]="score > 0"
           [class.current-round]="$index === currentRound() - 1 && score === 0">
        <div class="footer-label">R{{ $index + 1 }}</div>
        @if (score > 0) {
          <div class="footer-score">{{ score }}</div>
        } @else if ($index === currentRound() - 1) {
          <div class="footer-current">â€¢</div>
        }
      </div>
    }
    <!-- Total score display -->
    <div class="total-score-wrapper">
      <div class="total-label">Total</div>
      <div class="total-score">{{ getTotalScore() }}</div>
    </div>
  </div>
</div>
